<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RBXM ‚Üí Asset ID Converter</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

    <canvas id="galaxyCanvas"></canvas>
    <div class="aurora aurora-1"></div>
    <div class="aurora aurora-2"></div>
    <div class="aurora aurora-3"></div>
    <div class="grain-overlay"></div>

    <div class="app">

        <!-- Navbar -->
        <nav class="navbar">
            <div class="nav-inner">
                <div class="nav-brand">
                    <div class="brand-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                            <polyline points="7.5 4.21 12 6.81 16.5 4.21"/>
                            <line x1="12" y1="22.08" x2="12" y2="11.73"/>
                        </svg>
                        <div class="brand-glow"></div>
                    </div>
                    <div class="brand-text">
                        <span class="brand-title">RBXM Converter</span>
                        <span class="brand-sub">Open Cloud Asset Upload</span>
                    </div>
                </div>
                <div class="nav-right">
                    <button class="nav-help-btn" onclick="toggleHelp()" type="button" id="navHelpBtn">
                        <i class="fas fa-book-open"></i>
                        <span>Help</span>
                    </button>
                    <div class="nav-status">
                        <span class="status-indicator"></span>
                        <span>Ready</span>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Stepper -->
        <div class="stepper">
            <div class="stepper-inner">
                <div class="stepper-track">
                    <div class="stepper-fill" id="stepperFill"></div>
                </div>
                <div class="step-node active" data-step="1">
                    <div class="node-dot"><i class="fas fa-key"></i></div>
                    <span>Setup</span>
                </div>
                <div class="step-node" data-step="2">
                    <div class="node-dot"><i class="fas fa-file-upload"></i></div>
                    <span>Upload</span>
                </div>
                <div class="step-node" data-step="3">
                    <div class="node-dot"><i class="fas fa-sync-alt"></i></div>
                    <span>Convert</span>
                </div>
                <div class="step-node" data-step="4">
                    <div class="node-dot"><i class="fas fa-check"></i></div>
                    <span>Done</span>
                </div>
            </div>
        </div>

        <!-- ==================== HELP CARD ==================== -->
        <div class="help-card" id="helpCard">
            <div class="card">
                <div class="card-glow help-card-glow"></div>
                <div class="card-content">
                    <!-- Header -->
                    <div class="help-header">
                        <div class="help-header-left">
                            <div class="header-icon help-hdr-icon">
                                <i class="fas fa-book-open"></i>
                            </div>
                            <div>
                                <h2>Help Guide</h2>
                                <p>Step-by-step tutorial for beginners</p>
                            </div>
                        </div>
                        <button class="help-x" onclick="toggleHelp()" type="button">
                            <i class="fas fa-xmark"></i>
                        </button>
                    </div>

                    <!-- Tabs -->
                    <div class="htabs">
                        <button class="htab on" onclick="htab(0,this)" type="button"><i class="fas fa-key"></i><span>API Key</span></button>
                        <button class="htab" onclick="htab(1,this)" type="button"><i class="fas fa-id-badge"></i><span>User ID</span></button>
                        <button class="htab" onclick="htab(2,this)" type="button"><i class="fas fa-file-export"></i><span>RBXM File</span></button>
                        <button class="htab" onclick="htab(3,this)" type="button"><i class="fas fa-circle-question"></i><span>FAQ</span></button>
                    </div>

                    <!-- Tab Panels -->
                    <div class="hpanels">

                        <!-- 0: API Key -->
                        <div class="hpanel show" data-hp="0">
                            <div class="htitle"><span class="hbadge purple">Guide</span> How to Get Your API Key</div>
                            <div class="hsteps">
                                <div class="hstep">
                                    <div class="hnum">1</div>
                                    <div class="hbody">
                                        <h4>Open Creator Dashboard</h4>
                                        <p>Go to Roblox credentials page.</p>
                                        <a href="https://create.roblox.com/dashboard/credentials" target="_blank" rel="noopener" class="hlink"><i class="fas fa-arrow-up-right-from-square"></i> create.roblox.com/dashboard/credentials</a>
                                    </div>
                                </div>
                                <div class="hstep">
                                    <div class="hnum">2</div>
                                    <div class="hbody">
                                        <h4>Click "CREATE API KEY"</h4>
                                        <p>Blue button at top right of the page.</p>
                                    </div>
                                </div>
                                <div class="hstep">
                                    <div class="hnum">3</div>
                                    <div class="hbody">
                                        <h4>Name Your Key</h4>
                                        <p>Use something like <code>RBXM Converter</code>.</p>
                                    </div>
                                </div>
                                <div class="hstep">
                                    <div class="hnum">4</div>
                                    <div class="hbody">
                                        <h4>Add Permission: Assets API</h4>
                                        <p><strong>Access Permissions</strong> ‚Üí <strong>Add API System</strong> ‚Üí <strong>Assets</strong></p>
                                        <div class="hnote warn"><i class="fas fa-triangle-exclamation"></i><span>Enable both <strong>Read</strong> and <strong>Write</strong>!</span></div>
                                    </div>
                                </div>
                                <div class="hstep">
                                    <div class="hnum">5</div>
                                    <div class="hbody">
                                        <h4>Set Accepted IP</h4>
                                        <p>For testing, allow all IPs:</p>
                                        <div class="hcode"><code>0.0.0.0/0</code><button onclick="hcopy('0.0.0.0/0',this)" type="button"><i class="far fa-copy"></i></button></div>
                                    </div>
                                </div>
                                <div class="hstep last">
                                    <div class="hnum">6</div>
                                    <div class="hbody">
                                        <h4>Save & Copy Key</h4>
                                        <p>Click <strong>SAVE & GENERATE KEY</strong>. Shown <strong>only once</strong>!</p>
                                        <div class="hnote danger"><i class="fas fa-lock"></i><span>Never share your API key with anyone.</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 1: User ID -->
                        <div class="hpanel" data-hp="1">
                            <div class="htitle"><span class="hbadge blue">Guide</span> How to Find Your User ID</div>
                            <div class="hsteps">
                                <div class="hstep">
                                    <div class="hnum">1</div>
                                    <div class="hbody">
                                        <h4>Open Your Roblox Profile</h4>
                                        <p>Go to roblox.com, click your username.</p>
                                        <a href="https://www.roblox.com/home" target="_blank" rel="noopener" class="hlink"><i class="fas fa-arrow-up-right-from-square"></i> roblox.com/home</a>
                                    </div>
                                </div>
                                <div class="hstep">
                                    <div class="hnum">2</div>
                                    <div class="hbody">
                                        <h4>Check the URL</h4>
                                        <p>Your profile URL contains the ID:</p>
                                        <div class="hcode"><code>roblox.com/users/<strong>123456789</strong>/profile</code></div>
                                        <p class="mt8">The number is your User ID.</p>
                                    </div>
                                </div>
                                <div class="hstep">
                                    <div class="hnum">3</div>
                                    <div class="hbody">
                                        <h4>Alternative: Roblox Studio</h4>
                                        <p>Studio ‚Üí <strong>File ‚Üí Settings</strong> ‚Üí ID shown there.</p>
                                    </div>
                                </div>
                                <div class="hstep last">
                                    <div class="hnum tip">üí°</div>
                                    <div class="hbody">
                                        <h4>For Group Uploads</h4>
                                        <ol class="hlist">
                                            <li>Go to group page</li>
                                            <li>URL: <code>roblox.com/groups/<strong>7654321</strong>/...</code></li>
                                            <li>Use that number as Creator ID</li>
                                            <li>Set Creator Type to <strong>Group</strong></li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 2: RBXM -->
                        <div class="hpanel" data-hp="2">
                            <div class="htitle"><span class="hbadge green">Guide</span> How to Get a .rbxm File</div>
                            <div class="hsteps">
                                <div class="hstep">
                                    <div class="hnum">1</div>
                                    <div class="hbody">
                                        <h4>Open Roblox Studio</h4>
                                        <p>Open the place with your model.</p>
                                    </div>
                                </div>
                                <div class="hstep">
                                    <div class="hnum">2</div>
                                    <div class="hbody">
                                        <h4>Select Your Model</h4>
                                        <p>Click the object in <strong>Explorer</strong> panel.</p>
                                        <div class="hnote info"><i class="fas fa-lightbulb"></i><span>Hold <strong>Ctrl</strong> to select multiple.</span></div>
                                    </div>
                                </div>
                                <div class="hstep">
                                    <div class="hnum">3</div>
                                    <div class="hbody">
                                        <h4>Right Click ‚Üí "Save to File..."</h4>
                                        <p>Choose <strong>Save to File</strong> from context menu.</p>
                                    </div>
                                </div>
                                <div class="hstep">
                                    <div class="hnum">4</div>
                                    <div class="hbody">
                                        <h4>Save as .rbxm</h4>
                                        <p>Set format to:</p>
                                        <div class="hcode"><code>Roblox Model (*.rbxm)</code></div>
                                    </div>
                                </div>
                                <div class="hstep last">
                                    <div class="hnum tip">üìù</div>
                                    <div class="hbody">
                                        <h4>.rbxm vs .rbxmx</h4>
                                        <div class="hcompare">
                                            <div class="hcmp"><span class="hext">.rbxm</span><span>Binary ‚Äî smaller, faster ‚úÖ</span></div>
                                            <div class="hcmp"><span class="hext">.rbxmx</span><span>XML ‚Äî readable, larger</span></div>
                                        </div>
                                        <p class="mt8">Both work. <strong>.rbxm recommended.</strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 3: FAQ -->
                        <div class="hpanel" data-hp="3">
                            <div class="htitle"><span class="hbadge orange">FAQ</span> Frequently Asked Questions</div>
                            <div class="faq-list">
                                <div class="faq" onclick="faqToggle(this)">
                                    <div class="faq-q"><span>What does this tool do?</span><i class="fas fa-chevron-down"></i></div>
                                    <div class="faq-a"><p>Uploads .rbxm to Roblox via Open Cloud API ‚Üí returns <strong>Asset ID</strong> for Toolbox/scripts.</p></div>
                                </div>
                                <div class="faq" onclick="faqToggle(this)">
                                    <div class="faq-q"><span>Is my API key safe?</span><i class="fas fa-chevron-down"></i></div>
                                    <div class="faq-a"><p>Sent directly to Roblox servers. <strong>Never stored.</strong> Keep it private.</p></div>
                                </div>
                                <div class="faq" onclick="faqToggle(this)">
                                    <div class="faq-q"><span>Why "401 Unauthorized"?</span><i class="fas fa-chevron-down"></i></div>
                                    <div class="faq-a"><p>Invalid API key. Check: full key copied, has <strong>Assets Read+Write</strong>, IP allowed (<code>0.0.0.0/0</code>).</p></div>
                                </div>
                                <div class="faq" onclick="faqToggle(this)">
                                    <div class="faq-q"><span>Why "403 Forbidden"?</span><i class="fas fa-chevron-down"></i></div>
                                    <div class="faq-a"><p>Wrong Creator ID, no group permission, or wrong API permissions.</p></div>
                                </div>
                                <div class="faq" onclick="faqToggle(this)">
                                    <div class="faq-q"><span>Do I need server.js?</span><i class="fas fa-chevron-down"></i></div>
                                    <div class="faq-a">
                                        <p><strong>Yes.</strong> Roblox blocks browser requests (CORS). Run:</p>
                                        <div class="hcode mt8"><code>node server.js</code><button onclick="event.stopPropagation();hcopy('node server.js',this)" type="button"><i class="far fa-copy"></i></button></div>
                                    </div>
                                </div>
                                <div class="faq" onclick="faqToggle(this)">
                                    <div class="faq-q"><span>Max file size?</span><i class="fas fa-chevron-down"></i></div>
                                    <div class="faq-a"><p>Up to <strong>50 MB</strong>.</p></div>
                                </div>
                                <div class="faq" onclick="faqToggle(this)">
                                    <div class="faq-q"><span>Upload Decals / Audio?</span><i class="fas fa-chevron-down"></i></div>
                                    <div class="faq-a"><p><strong>Yes!</strong> Change Asset Type in Step 1.</p></div>
                                </div>
                                <div class="faq" onclick="faqToggle(this)">
                                    <div class="faq-q"><span>How to use Asset ID in game?</span><i class="fas fa-chevron-down"></i></div>
                                    <div class="faq-a">
                                        <div class="hcode"><code>game:GetService("InsertService"):LoadAsset(ID).Parent = workspace</code></div>
                                        <p class="mt8">Or search ID in <strong>Toolbox</strong>.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== CONVERTER PANELS ==================== -->
        <div class="panel-container">

            <!-- Panel 1 -->
            <section class="panel active" id="panel-1">
                <div class="card">
                    <div class="card-glow"></div>
                    <div class="card-content">
                        <div class="card-header">
                            <div class="header-icon purple"><i class="fas fa-shield-halved"></i></div>
                            <div><h2>API Configuration</h2><p>Connect to Roblox Open Cloud</p></div>
                        </div>
                        <div class="field">
                            <label><i class="fas fa-key"></i> API Key</label>
                            <div class="input-glass">
                                <input type="password" id="apiKey" placeholder="Enter your Open Cloud API Key" spellcheck="false">
                                <button class="input-action" onclick="toggleVis('apiKey',this)" type="button"><i class="far fa-eye"></i></button>
                            </div>
                            <div class="field-hint"><i class="fas fa-circle-info"></i> Don't have one? Click <strong>Help</strong> above!</div>
                        </div>
                        <div class="field">
                            <label><i class="fas fa-id-badge"></i> Creator ID</label>
                            <div class="input-glass">
                                <input type="text" id="creatorId" placeholder="Your Roblox User ID or Group ID" spellcheck="false">
                            </div>
                        </div>
                        <div class="field-row">
                            <div class="field">
                                <label><i class="fas fa-user-tag"></i> Creator Type</label>
                                <div class="select-glass">
                                    <select id="creatorType"><option value="User">User</option><option value="Group">Group</option></select>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            <div class="field">
                                <label><i class="fas fa-shapes"></i> Asset Type</label>
                                <div class="select-glass">
                                    <select id="assetType"><option value="Model">Model</option><option value="Decal">Decal</option><option value="Audio">Audio</option></select>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="nextStep(2)">Continue <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
            </section>

            <!-- Panel 2 -->
            <section class="panel" id="panel-2">
                <div class="card">
                    <div class="card-glow"></div>
                    <div class="card-content">
                        <div class="card-header">
                            <div class="header-icon blue"><i class="fas fa-cloud-arrow-up"></i></div>
                            <div><h2>Upload File</h2><p>Select your RBXM model file</p></div>
                        </div>
                        <div class="drop-area" id="dropArea">
                            <input type="file" id="fileInput" accept=".rbxm,.rbxmx" hidden>
                            <div class="drop-visual">
                                <div class="drop-icon-wrap">
                                    <div class="drop-ring ring-1"></div>
                                    <div class="drop-ring ring-2"></div>
                                    <div class="drop-ring ring-3"></div>
                                    <i class="fas fa-cloud-arrow-up"></i>
                                </div>
                                <h3>Drag & drop your file</h3>
                                <p>or tap to browse</p>
                                <div class="supported-badge"><span>.rbxm</span><span>.rbxmx</span></div>
                            </div>
                        </div>
                        <div class="file-preview" id="filePreview">
                            <div class="file-preview-icon"><i class="fas fa-cube"></i></div>
                            <div class="file-preview-info">
                                <span class="fp-name" id="fpName">-</span>
                                <span class="fp-size" id="fpSize">-</span>
                            </div>
                            <button class="file-remove" onclick="clearFile()" type="button"><i class="fas fa-xmark"></i></button>
                        </div>
                        <div class="field">
                            <label><i class="fas fa-pencil"></i> Asset Name</label>
                            <div class="input-glass"><input type="text" id="assetName" placeholder="Display name on Roblox"></div>
                        </div>
                        <div class="field">
                            <label><i class="fas fa-align-left"></i> Description <span class="optional">optional</span></label>
                            <div class="input-glass"><textarea id="assetDesc" placeholder="Asset description..." rows="2"></textarea></div>
                        </div>
                        <div class="btn-row">
                            <button class="btn btn-ghost" onclick="nextStep(1)"><i class="fas fa-arrow-left"></i> Back</button>
                            <button class="btn btn-primary" onclick="nextStep(3)">Upload & Convert <i class="fas fa-wand-magic-sparkles"></i></button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Panel 3 -->
            <section class="panel" id="panel-3">
                <div class="card">
                    <div class="card-glow"></div>
                    <div class="card-content">
                        <div class="card-header">
                            <div class="header-icon orange"><i class="fas fa-gear fa-spin"></i></div>
                            <div><h2 id="convertTitle">Converting...</h2><p id="convertSub">Uploading asset to Roblox</p></div>
                        </div>
                        <div class="progress-wrap">
                            <div class="progress-track">
                                <div class="progress-fill" id="progressFill"></div>
                                <div class="progress-glow" id="progressGlow"></div>
                            </div>
                            <div class="progress-meta">
                                <span id="progressLabel">Preparing...</span>
                                <span id="progressPct" class="pct">0%</span>
                            </div>
                        </div>
                        <div class="log-box">
                            <div class="log-bar"><i class="fas fa-terminal"></i><span>Activity Log</span></div>
                            <div class="log-list" id="logList"></div>
                        </div>
                        <button class="btn btn-ghost" id="retryBtn" style="display:none" onclick="nextStep(2)"><i class="fas fa-arrow-left"></i> Go Back & Retry</button>
                    </div>
                </div>
            </section>

            <!-- Panel 4 -->
            <section class="panel" id="panel-4">
                <div class="card">
                    <div class="card-glow success-glow"></div>
                    <div class="card-content">
                        <div class="success-hero">
                            <div class="success-check">
                                <svg viewBox="0 0 52 52"><circle cx="26" cy="26" r="25" fill="none" stroke="currentColor" stroke-width="2"/><path fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" d="M14 27l7 7 16-16" class="check-path"/></svg>
                            </div>
                            <h2>Upload Successful!</h2>
                            <p>Your asset is live on Roblox</p>
                        </div>
                        <div class="result-block main-result">
                            <span class="result-label">Asset ID</span>
                            <div class="result-value-row">
                                <span class="result-big-id" id="resAssetId">-</span>
                                <button class="copy-btn" onclick="copyText('resAssetId','Asset ID')" type="button"><i class="far fa-copy"></i></button>
                            </div>
                        </div>
                        <div class="result-block">
                            <span class="result-label">Library Link</span>
                            <div class="result-value-row">
                                <a class="result-link" id="resLink" href="#" target="_blank" rel="noopener">Open in Roblox <i class="fas fa-arrow-up-right-from-square"></i></a>
                                <button class="copy-btn" onclick="copyLink()" type="button"><i class="far fa-copy"></i></button>
                            </div>
                        </div>
                        <div class="result-block">
                            <span class="result-label">Insert Script</span>
                            <div class="code-row"><code id="resCode">-</code><button class="copy-btn" onclick="copyText('resCode','Script')" type="button"><i class="far fa-copy"></i></button></div>
                        </div>
                        <div class="meta-grid">
                            <div class="meta-item"><span class="meta-key"><i class="fas fa-tag"></i> Name</span><span class="meta-val" id="resName">-</span></div>
                            <div class="meta-item"><span class="meta-key"><i class="fas fa-cube"></i> Type</span><span class="meta-val" id="resType">-</span></div>
                            <div class="meta-item"><span class="meta-key"><i class="fas fa-clock"></i> Time</span><span class="meta-val" id="resTime">-</span></div>
                        </div>
                        <button class="btn btn-primary" onclick="resetApp()"><i class="fas fa-plus"></i> Convert Another</button>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <div id="toasts"></div>
    <canvas id="confetti"></canvas>
    <script src="script.js"></script>
</body>
</html>
